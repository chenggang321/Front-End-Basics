## 函数式编程

### 什么是函数式编程？为何它重要？

#### 数学中的函数

```
f(x) = y
// 一个函数f，以x为参数，并返回输出y
```
关键点：

* 函数必须总是接受一个参数
* 函数必须总是返回一个值
* 函数应该依据接收到的参数（例如x）而不是外部环境运行
* 对于一个给定的x，只会输出唯一的一个y

函数式编程技术主要基于数学函数和它的思想，所以要理解函数式编程，先了解数学函数是有必要的。

### 函数式编程的定义

函数是一段可以通过其名称被调用的代码。它可以传递参数，并返回值。

与面向对象编程（Object-oriented programming）和过程式编程（Procedural programming）一样，函数式编程（Funcitonal programming）也是一种编程范式。我们能够以此创建仅依赖输入就可以完成自身逻辑的函数。这保证了当函数被多次调用时仍然返回相同的结果（引用透明性）。函数不会改变任何外部环境的变量，这将产生可缓存的，可测试的代码库。


### 函数式编程具有以下特征

#### 1、引用透明性

所有的函数对于相同的输入都将返回相同的值，函数的这一属性被称为**引用透明性（Referential Transparency）**

```
// 引用透明的例子，函数identity无论输入什么，都会原封不动的返回
var identity = (i) => {return i}
```

##### 替换模型

把一个引用透明的函数用于其他函数调用之间。

`sum(4,5) + identity(1)`

根据引用透明的定义，我们可以把上面的语句换成：

`sum(4,5) + 1`

该过程被称为替换模型（Substitution Model）,因为函数的逻辑不依赖其他全局变量，你可以直接替换函数的结果，这与它的值是一样的。所以，这使得**并发代码**和**缓存**成为可能。

**并发代码：** 并发运行的时候，如果依赖了全局数据，要保证数据一致，必须同步，而且必要时需要锁机制。遵循引用透明的函数只依赖参数的输入，所以可以自由的运行。

**缓存：** 由于函数会为给定的输入返回相同的值，实际上我们就能缓存它了。比如实现一个计算给定数值的阶乘的函数，我们就可以把每次阶乘的结果缓存下来，下一次直接用，就不用计算了。比如第一次输入5，结果是120，第二次输入5，我们知道结果必然是120，所以就可以返回已缓存的值，而不必再计算一次。

#### 2、声明式和抽象

函数式编程主张声明式编程和编写抽象的代码。

##### 比较命令式和声明式

```
// 有一个数组，要遍历它并把它打印到控制台

/*命令式*/
var array = [1,2,3]
for(var i = 0; i < array.length; i++)
console(array[i]) // 打印 1,2,3

// 命令式编程中，我们精确的告诉程序应该“如何”做：获取数组的长度，通过数组的长度循环数组，在每一次循环中用索引获取每一个数组元素，然后打印出来。
// 但是我们的任务只是打印出数组的元素。并不是要告诉编译器要如何实现一个遍历。



/*声明式*/
var array = [1,2,3]
array.forEach((element) => console.log(element)) // 打印 1,2,3

// 我们使用了一个处理“如何”做的抽象函数，然后我们就能只关心做“什么”了
```

##### 函数式编程主张以抽象的方式创建函数，例如上文的forEach，这些函数能够在代码的其他部分被重用。

### 函数式编程的好处

#### 1、纯函数

大多数函数式编程的好处来自于编写纯函数，纯函数是对给定的输入返回相同的输出的函数。
